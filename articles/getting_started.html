<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Data checker • data.checker</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Data checker">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">data.checker</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/getting_started.html">Data checker</a></li>
    <li><a class="dropdown-item" href="../articles/export_formats.html">Export formats</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Data checker</h1>
            
      

      <div class="d-none name"><code>getting_started.Rmd</code></div>
    </div>

    
    
<p><code>data.checker</code> is a package for helping with boilerplate
data checks. It enables you to automate fundamental data checks which,
while simple, can be time-consuming to implement.</p>
<p><code>data.checker</code></p>
<ul>
<li><p>Checks data against a user supplied schema that defines what
columns and data types are expected</p></li>
<li><p>Enables user to add additional custom data checks based on
multiple columns</p></li>
<li><p>Creates exports of the results for QA</p></li>
</ul>
<div class="section level2">
<h2 id="the-basics">The basics<a class="anchor" aria-label="anchor" href="#the-basics"></a>
</h2>
<p>Initialising the data checker is simple. All you need to supply are a
dataset and a schema. The schema is a named list that tells the data
checker what sorts of columns and values to expect.</p>
<div class="section level3">
<h3 id="example-dataset">Example dataset:<a class="anchor" aria-label="anchor" href="#example-dataset"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://onsdigital.github.io/data.checker/">data.checker</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">13</span>, <span class="fl">15</span>, <span class="fl">22</span>, <span class="fl">34</span>, <span class="fl">80</span><span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span></span>
<span><span class="co">#&gt;   age sex</span></span>
<span><span class="co">#&gt; 1  10   M</span></span>
<span><span class="co">#&gt; 2  11   F</span></span>
<span><span class="co">#&gt; 3  13   M</span></span>
<span><span class="co">#&gt; 4  15   F</span></span>
<span><span class="co">#&gt; 5  22   M</span></span>
<span><span class="co">#&gt; 6  34   F</span></span>
<span><span class="co">#&gt; 7  80   M</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-schema">Example schema:<a class="anchor" aria-label="anchor" href="#example-schema"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  check_duplicates <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  check_completeness <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"integer"</span>, optional <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"character"</span>, optional <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">schema</span></span>
<span><span class="co">#&gt; $check_duplicates</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $check_completeness</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $columns</span></span>
<span><span class="co">#&gt; $columns$age</span></span>
<span><span class="co">#&gt; $columns$age$type</span></span>
<span><span class="co">#&gt; [1] "integer"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $columns$age$optional</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $columns$sex</span></span>
<span><span class="co">#&gt; $columns$sex$type</span></span>
<span><span class="co">#&gt; [1] "character"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $columns$sex$optional</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="initialising-the-data-checker">Initialising the data checker<a class="anchor" aria-label="anchor" href="#initialising-the-data-checker"></a>
</h3>
<p>Running the <code>new_validator</code> function will create a
<code>Validator</code> object.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">validator</span> <span class="op">&lt;-</span> <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="../reference/new_validator.html">new_validator</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">df</span>,</span>
<span>  schema <span class="op">=</span> <span class="va">schema</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">validator</span><span class="op">)</span></span>
<span><span class="co">#&gt;  System information                                                                                                                                                                                                     </span></span>
<span><span class="co">#&gt;  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;  Date: 2025-01-01</span></span>
<span><span class="co">#&gt; sysname: Windows</span></span>
<span><span class="co">#&gt; release: 10 x64</span></span>
<span><span class="co">#&gt; version: </span></span>
<span><span class="co">#&gt; nodename: </span></span>
<span><span class="co">#&gt; machine: </span></span>
<span><span class="co">#&gt; login: username</span></span>
<span><span class="co">#&gt; user: username</span></span>
<span><span class="co">#&gt; effective_user: username</span></span>
<span><span class="co">#&gt; udomain: </span></span>
<span><span class="co">#&gt; R version : R version 4.5.1 (2025-06-13 ucrt)</span></span>
<span><span class="co">#&gt; data.checker version: 0.0.0.9000  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span></code></pre></div>
<p>The <code>Validator</code> object logs system information which can
be exported along with the QA log, meaning you have a comprehensive
record of what was done, when and on what systems. Printing the
<code>Validator</code> object will show you the current QA log.</p>
</div>
<div class="section level3">
<h3 id="running-checks">Running checks<a class="anchor" aria-label="anchor" href="#running-checks"></a>
</h3>
<p>The <code>check</code> function will run the full suite of checks on
your <code>Validator</code> object and add them to the log.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">check_results</span> <span class="op">&lt;-</span> <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="../reference/check.html">check</a></span><span class="op">(</span><span class="va">validator</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">check_results</span><span class="op">)</span></span>
<span><span class="co">#&gt;  System information                                                                                                                                                                                                     </span></span>
<span><span class="co">#&gt;  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;  Date: 2025-01-01</span></span>
<span><span class="co">#&gt; sysname: Windows</span></span>
<span><span class="co">#&gt; release: 10 x64</span></span>
<span><span class="co">#&gt; version: </span></span>
<span><span class="co">#&gt; nodename: </span></span>
<span><span class="co">#&gt; machine: </span></span>
<span><span class="co">#&gt; login: username</span></span>
<span><span class="co">#&gt; user: username</span></span>
<span><span class="co">#&gt; effective_user: username</span></span>
<span><span class="co">#&gt; udomain: </span></span>
<span><span class="co">#&gt; R version : R version 4.5.1 (2025-06-13 ucrt)</span></span>
<span><span class="co">#&gt; data.checker version: 0.0.0.9000  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Timestamp   Description                                                               Outcome   Failing Ids   n Failing   Entry Type </span></span>
<span><span class="co">#&gt; ----------  ------------------------------------------------------------------------  --------  ------------  ----------  -----------</span></span>
<span><span class="co">#&gt; 08:22:55    Column names contain no symbols other than underscores.                   ✅ pass                 N/A         warning    </span></span>
<span><span class="co">#&gt; 08:22:55    Column names contain no upper case letters.                               ✅ pass                 N/A         warning    </span></span>
<span><span class="co">#&gt; 08:22:55    All mandatory columns are present.                                        ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    There are no unexpected columns.                                          ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Removed schema information for optional columns that aren't in the data                           N/A         info       </span></span>
<span><span class="co">#&gt; 08:22:55    Correct column types                                                      ❌ fail   age           1           error      </span></span>
<span><span class="co">#&gt; 08:22:55    Correct column classes                                                    ✅ pass                 N/A         error</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="exporting-your-log">Exporting your log<a class="anchor" aria-label="anchor" href="#exporting-your-log"></a>
</h3>
<p>The <code>export</code> function will export your log in html, csv,
yaml or json. We strongly recommend exporting these automated QA logs
along with your outputs so you have a record of which automated checks
were done and what they found.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="../reference/export.html">export</a></span><span class="op">(</span><span class="va">check_results</span>, file <span class="op">=</span> <span class="st">"example.html"</span>, format <span class="op">=</span> <span class="st">"html"</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, you can use the <code>validate</code> function to run
the full process.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="../reference/check_and_export.html">check_and_export</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">schema</span>, file <span class="op">=</span> <span class="st">"example.html"</span>, format <span class="op">=</span> <span class="st">"html"</span>, hard_check <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="setting-up-the-schema">Setting up the schema<a class="anchor" aria-label="anchor" href="#setting-up-the-schema"></a>
</h2>
<p>The schema has certain mandatory and optional fields.</p>
<div class="section level3">
<h3 id="mandatory-fields">Mandatory fields<a class="anchor" aria-label="anchor" href="#mandatory-fields"></a>
</h3>
<p><code>check_duplicates</code>: TRUE or FALSE. If TRUE, the dataset
will be checked for duplicate rows. <code>check_completeness</code>:
TRUE or FALSE. If TRUE, the dataset will be checked to ensure there is
at least one row for all combinations of factors. <code>columns</code>:
a list of column names with an entry for each column.</p>
<p>For each column, you should include a type (“character”, “integer”,
“double”, “logical”). You also need an “optional” setting (TRUE or
FALSE) if TRUE the checker will raise an error if the column is missing.
If FALSE the checker data will not raise an error if it’s missing.</p>
<p>You can also optionally define a class if you want it to be checked.
There are three special types you can choose - “Date”, “datetime” and
“factor”. In R, these are implemented as a specific combination of types
and classes, but the data checker simplifies this for you by setting up
those parts of the schema for you.</p>
</div>
<div class="section level3">
<h3 id="optional-checks">Optional checks:<a class="anchor" aria-label="anchor" href="#optional-checks"></a>
</h3>
<p>Optional checks can be applied to each column depending on the column
type. In the scheme, these should form part of the <code>columns</code>
list.</p>
<ul>
<li>all types:
<ul>
<li>allow_na (TRUE/FALSE): checks if there are any missing values</li>
<li>class (character vector of any length): checks class of column</li>
</ul>
</li>
<li>integer/double checks:
<ul>
<li>min_val (numeric): minimum value</li>
<li>max_val (numeric): maximum value</li>
<li>min_decimal (double only, numeric): minimum number of decimal
places</li>
<li>max_decimal (double only, numeric): maximum number of decimal
places</li>
</ul>
</li>
<li>character checks:
<ul>
<li>min_length (numeric): minimum number of characters</li>
<li>max_length (numeric): maximum number of characters</li>
<li>allowed strings (character): either a list of allowed strings or a
regular expression (see regular expression guide below)</li>
<li>forbidden_strings (character): either a list of forbidden strings or
a regular expression</li>
</ul>
</li>
<li>Date checks:
<ul>
<li>min_date (character): minimum date using the format “YYYY-MM-DD”,
e.g. “2025-08-19”</li>
<li>max_date (character): maximum date using the format “YYYY-MM-DD”,
e.g. “2025-08-19”</li>
</ul>
</li>
<li>datetime checks:
<ul>
<li>min_datetime (character): minimum time using the format “YYYY-MM-DD
HH-MM-SS”. Datetime is more flexible than Date, meaning the hour, minute
and second parts are optional. It will accept the formats: Y, YM, YMD,
YMDH, YMDHM and YMDHMS.</li>
<li>max_datetime (character): same format as min_datetime</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="loading-from-file">Loading from file<a class="anchor" aria-label="anchor" href="#loading-from-file"></a>
</h3>
<p>Schema objects can get pretty large and clutter your code. You should
also avoid needing to edit your code every time you want to change your
schema. Instead, you can create your schema as a yaml or json file
instead. You can then supply <code>new_validator</code> with the file
path, and the package will do the rest.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,</span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">40</span>, <span class="fl">50</span>, <span class="fl">60</span>, <span class="fl">70</span>, <span class="fl">80</span>, <span class="fl">90</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span>,</span>
<span>  country <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"England"</span>, <span class="st">"England"</span>, <span class="st">"Wales"</span>, <span class="st">"Scotland"</span>, <span class="st">"Wales"</span>, <span class="st">"England"</span>, <span class="st">"Northern Ireland"</span>, <span class="st">"Wales"</span>, <span class="st">"Scotland"</span>, <span class="st">"Northern Ireland"</span><span class="op">)</span>,</span>
<span>    levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"England"</span>, <span class="st">"Scotland"</span>, <span class="st">"Wales"</span>, <span class="st">"Northern Ireland"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  date <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/ymd.html" class="external-link">ymd</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"2021-01-01"</span>,</span>
<span>    <span class="st">"2021-02-01"</span>,</span>
<span>    <span class="st">"2021-02-01"</span>,</span>
<span>    <span class="st">"2021-03-01"</span>,</span>
<span>    <span class="st">"2021-03-01"</span>,</span>
<span>    <span class="st">"2021-03-01"</span>,</span>
<span>    <span class="st">"2021-04-01"</span>,</span>
<span>    <span class="st">"2021-04-01"</span>,</span>
<span>    <span class="st">"2021-04-01"</span>,</span>
<span>    <span class="st">"2021-05-01"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_check_results</span> <span class="op">&lt;-</span> <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="../reference/new_validator.html">new_validator</a></span><span class="op">(</span>schema <span class="op">=</span> <span class="st">"example_schema.yaml"</span>, data <span class="op">=</span> <span class="va">df</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="../reference/check.html">check</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">data_check_results</span><span class="op">)</span></span>
<span><span class="co">#&gt;  System information                                                                                                                                                                                                     </span></span>
<span><span class="co">#&gt;  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;  Date: 2025-01-01</span></span>
<span><span class="co">#&gt; sysname: Windows</span></span>
<span><span class="co">#&gt; release: 10 x64</span></span>
<span><span class="co">#&gt; version: </span></span>
<span><span class="co">#&gt; nodename: </span></span>
<span><span class="co">#&gt; machine: </span></span>
<span><span class="co">#&gt; login: username</span></span>
<span><span class="co">#&gt; user: username</span></span>
<span><span class="co">#&gt; effective_user: username</span></span>
<span><span class="co">#&gt; udomain: </span></span>
<span><span class="co">#&gt; R version : R version 4.5.1 (2025-06-13 ucrt)</span></span>
<span><span class="co">#&gt; data.checker version: 0.0.0.9000  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Timestamp   Description                                                               Outcome   Failing Ids   n Failing   Entry Type </span></span>
<span><span class="co">#&gt; ----------  ------------------------------------------------------------------------  --------  ------------  ----------  -----------</span></span>
<span><span class="co">#&gt; 08:22:55    Column names contain no symbols other than underscores.                   ✅ pass                 N/A         warning    </span></span>
<span><span class="co">#&gt; 08:22:55    Column names contain no upper case letters.                               ✅ pass                 N/A         warning    </span></span>
<span><span class="co">#&gt; 08:22:55    All mandatory columns are present.                                        ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    There are no unexpected columns.                                          ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Removed schema information for optional columns that aren't in the data                           N/A         info       </span></span>
<span><span class="co">#&gt; 08:22:55    Correct column types                                                      ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Correct column classes                                                    ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column id contains no missing values                                      ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column id: values are above or equal to 0                                 ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column id: values are below or equal to 1000                              ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column age contains no missing values                                     ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column age: values are above or equal to 0                                ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column age: values are below or equal to 120                              ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column age: decimal places above or equal to 0                            ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column age: decimal places below or equal to 2                            ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column sex contains no missing values                                     ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column sex only contains allowed strings                                  ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column country contains no missing values                                 ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column date contains no missing values                                    ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column date: dates are after 2020-01-01                                   ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Column date: dates are before 2023-12-31                                  ✅ pass                 N/A         error</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="custom-checks">Custom checks<a class="anchor" aria-label="anchor" href="#custom-checks"></a>
</h3>
<p>You can write your own checks using the <code>add_custom_check</code>
function. This is particularly useful for checks involving more than one
column, which cannot be configured using the standard template. The
checks are done in the context of the original data, meaning you can
reference columns as if they are variables in the environment (similar
to tidy evaluation). This is recommended because it guarantees the
checks are done on the correct data only. Alternatively, you can use
standard evaluation (see example below).</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,</span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">40</span>, <span class="fl">50</span>, <span class="fl">60</span>, <span class="fl">70</span>, <span class="fl">80</span>, <span class="fl">90</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  check_duplicates <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  check_completeness <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"double"</span>, optional <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"double"</span>, optional <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"character"</span>, optional <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_check_results</span> <span class="op">&lt;-</span> <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="../reference/new_validator.html">new_validator</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">schema</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="../reference/check.html">check</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="../reference/add_check.html">add_check</a></span><span class="op">(</span>description <span class="op">=</span> <span class="st">"There are no males over 90 (tidy evaluation)"</span>, condition <span class="op">=</span> <span class="op">!</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="st">"M"</span> <span class="op">&amp;</span> <span class="va">age</span> <span class="op">&gt;</span> <span class="fl">90</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="../reference/add_check.html">add_check</a></span><span class="op">(</span>description <span class="op">=</span> <span class="st">"There are no males over 90 (standard evaluation)"</span>, condition <span class="op">=</span> <span class="op">!</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">sex</span> <span class="op">==</span> <span class="st">"M"</span> <span class="op">&amp;</span> <span class="va">df</span><span class="op">$</span><span class="va">age</span> <span class="op">&gt;</span> <span class="fl">90</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_check_results</span> <span class="op">&lt;-</span> <span class="fu">anonymise_validator</span><span class="op">(</span><span class="va">data_check_results</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">data_check_results</span><span class="op">)</span></span>
<span><span class="co">#&gt;  System information                                                                                                                                                                                                     </span></span>
<span><span class="co">#&gt;  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;  Date: 2025-01-01</span></span>
<span><span class="co">#&gt; sysname: Windows</span></span>
<span><span class="co">#&gt; release: 10 x64</span></span>
<span><span class="co">#&gt; version: </span></span>
<span><span class="co">#&gt; nodename: </span></span>
<span><span class="co">#&gt; machine: </span></span>
<span><span class="co">#&gt; login: username</span></span>
<span><span class="co">#&gt; user: username</span></span>
<span><span class="co">#&gt; effective_user: username</span></span>
<span><span class="co">#&gt; udomain: </span></span>
<span><span class="co">#&gt; R version : R version 4.5.1 (2025-06-13 ucrt)</span></span>
<span><span class="co">#&gt; data.checker version: 0.0.0.9000  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Timestamp   Description                                                               Outcome   Failing Ids   n Failing   Entry Type </span></span>
<span><span class="co">#&gt; ----------  ------------------------------------------------------------------------  --------  ------------  ----------  -----------</span></span>
<span><span class="co">#&gt; 08:22:55    Column names contain no symbols other than underscores.                   ✅ pass                 N/A         warning    </span></span>
<span><span class="co">#&gt; 08:22:55    Column names contain no upper case letters.                               ✅ pass                 N/A         warning    </span></span>
<span><span class="co">#&gt; 08:22:55    All mandatory columns are present.                                        ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    There are no unexpected columns.                                          ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    Removed schema information for optional columns that aren't in the data                           N/A         info       </span></span>
<span><span class="co">#&gt; 08:22:55    Correct column types                                                      ❌ fail   id            1           error      </span></span>
<span><span class="co">#&gt; 08:22:55    Correct column classes                                                    ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    There are no males over 90 (tidy evaluation)                              ✅ pass                 N/A         error      </span></span>
<span><span class="co">#&gt; 08:22:55    There are no males over 90 (standard evaluation)                          ✅ pass                 N/A         error</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="custom-log-entries">Custom log entries<a class="anchor" aria-label="anchor" href="#custom-log-entries"></a>
</h3>
<p>You can choose to add your own entries to the QA log using the
<code>add_qa_entry</code> function. The function expects a datachecker
object as the first argument and a description. You can also optionally
add:</p>
<ul>
<li>
<code>failing_ids</code>: a vector containing the columns/rows that
failed the checks</li>
<li>
<code>outcome</code>: TRUE/FALSE for passing/failing checks or NA if
you want to leave the field blank. Defaults to NA</li>
<li>
<code>entry_type</code>: either “info”, “warning” or “error”. Info =
neutral log record, warning = something is wrong but could be safely
ignored, error something is wrong that is likely to break your code.
Defaults to “info”.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">13</span>, <span class="fl">15</span>, <span class="fl">22</span>, <span class="fl">34</span>, <span class="fl">80</span><span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  check_completeness <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  check_duplicates <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"integer"</span>, optional <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"character"</span>, optional <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">validator</span> <span class="op">&lt;-</span> <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="../reference/new_validator.html">new_validator</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">schema</span><span class="op">)</span></span>
<span></span>
<span><span class="va">validator</span> <span class="op">&lt;-</span> <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="../reference/add_qa_entry.html">add_qa_entry</a></span><span class="op">(</span></span>
<span>  <span class="va">validator</span>, </span>
<span>  description <span class="op">=</span> <span class="st">"Example custom log entry"</span>,</span>
<span>  entry_type <span class="op">=</span> <span class="st">"info"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">validator</span> <span class="op">&lt;-</span> <span class="fu">anonymise_validator</span><span class="op">(</span><span class="va">validator</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">validator</span><span class="op">)</span></span>
<span><span class="co">#&gt;  System information                                                                                                                                                                                                     </span></span>
<span><span class="co">#&gt;  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span></span>
<span><span class="co">#&gt;  Date: 2025-01-01</span></span>
<span><span class="co">#&gt; sysname: Windows</span></span>
<span><span class="co">#&gt; release: 10 x64</span></span>
<span><span class="co">#&gt; version: </span></span>
<span><span class="co">#&gt; nodename: </span></span>
<span><span class="co">#&gt; machine: </span></span>
<span><span class="co">#&gt; login: username</span></span>
<span><span class="co">#&gt; user: username</span></span>
<span><span class="co">#&gt; effective_user: username</span></span>
<span><span class="co">#&gt; udomain: </span></span>
<span><span class="co">#&gt; R version : R version 4.5.1 (2025-06-13 ucrt)</span></span>
<span><span class="co">#&gt; data.checker version: 0.0.0.9000  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Timestamp   Description                Outcome   Failing Ids   n Failing   Entry Type </span></span>
<span><span class="co">#&gt; ----------  -------------------------  --------  ------------  ----------  -----------</span></span>
<span><span class="co">#&gt; 08:22:55    Example custom log entry                           N/A         info</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
