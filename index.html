<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>What the Package Does (One Line, Title Case) • data.checker</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/Roboto-0.4.10/font.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="What the Package Does (One Line, Title Case)">
<meta name="description" content="What the package does (one paragraph).">
<meta property="og:description" content="What the package does (one paragraph).">
<meta property="og:image" content="https://onsdigital.github.io/data.checker/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">data.checker</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/getting_started.html">Data checker</a></li>
    <li><a class="dropdown-item" href="articles/export_formats.html">Export formats</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="datachecker-">data.checker <a class="anchor" aria-label="anchor" href="#datachecker-"></a>
</h1>
</div>
<p><code>data.checker</code> is a package for helping with boilerplate data checks. It enables you to automate fundamental data checks which, while simple, can be time-consuming to implement.</p>
<p><code>data.checker</code></p>
<ul>
<li><p>Checks data against a user supplied schema that defines what columns and data types are expected</p></li>
<li><p>Enables user to add additional custom data checks based on multiple columns</p></li>
<li><p>Creates exports of the results for QA</p></li>
</ul>
</div>
<div class="section level1">
<h1 id="getting-started">Getting Started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h1>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="section level3">
<h3 id="software-requirements">Software requirements<a class="anchor" aria-label="anchor" href="#software-requirements"></a>
</h3>
<p>To use this package, you’ll need the following software on your computer:</p>
<ol style="list-style-type: decimal">
<li>RStudio 2024.04.2 or later and R 4.5.0 or later</li>
<li>GIT 2.35.3 or later</li>
</ol>
<p>To install this R package, you will first need to clone the repository to you local machine by running</p>
<pre><code>git clone https://github.com/ONSdigital/data.checker.git</code></pre>
<p>Open the project in RStudio and in the console run:</p>
<pre><code><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install</span><span class="op">(</span><span class="op">)</span></span></code></pre>
<p>The package will be installed in you R library.</p>
</div>
</div>
<div class="section level2">
<h2 id="setup-and-usage">Setup and Usage<a class="anchor" aria-label="anchor" href="#setup-and-usage"></a>
</h2>
<p><code>data.checker</code> requires an input dataframe and a data schema to validate against. A full list of checks performed by the data checker, alongside how to include custom checks can be found <a href="#custom_checks">here</a>. The schema can either be defined within the R script itself or saved to either a JSON or YAML file to be loaded by the data checker. We recommend that schemas be saved as either a JSON or YAML to simplify the process of adding additional checks and column information. Once defined, we can pass both the dataframe and schema, alongside an output filepath and format for the report and the option for hardchecks into the <code>check_and_export</code> function.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">libary</span><span class="op">(</span><span class="va">data.checker</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">11</span>, <span class="fl">13</span>, <span class="fl">15</span>, <span class="fl">22</span>, <span class="fl">34</span>, <span class="fl">80</span><span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">my_schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  check_duplicates <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  check_completeness <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"integer"</span>, optional <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"character"</span>, optional <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/check_and_export.html">check_and_export</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df</span>,</span>
<span>         schema <span class="op">=</span> <span class="va">my_schema</span>, </span>
<span>         file <span class="op">=</span> <span class="st">"report.csv"</span>, </span>
<span>         format <span class="op">=</span> <span class="st">"csv"</span>, </span>
<span>         hard_check <span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>This will produce a <code>report.csv</code> containing the status of each of the validation checks. With hard_check set to <code>TRUE</code>, this will mean the code stops running if any validation checks fail. The report will still be produced before this stop so you can view and investigate the issue causing a fail.</p>
</div>
</div>
<div class="section level1">
<h1 id="pre-defined-and-adding-custom-checks">Pre-Defined and Adding Custom Checks<a class="anchor" aria-label="anchor" href="#pre-defined-and-adding-custom-checks"></a>
</h1>
<div class="section level2">
<h2 id="pre-defined-checks">Pre-Defined Checks<a class="anchor" aria-label="anchor" href="#pre-defined-checks"></a>
</h2>
<p>These checks can be included in the lists for individual columns in your schema, depending on the data type.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="20%">
<col width="20%">
<col width="39%">
</colgroup>
<thead><tr class="header">
<th>Data Type</th>
<th>Check Name</th>
<th>Parameter</th>
<th>Check Definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>integer / double</td>
<td>Minimum value</td>
<td>min_val</td>
<td>Checks that all values are above or equal to the minimum value</td>
</tr>
<tr class="even">
<td>integer / double</td>
<td>Maximum value</td>
<td>max_val</td>
<td>Checks that all values are below or equal to the maximum value</td>
</tr>
<tr class="odd">
<td>double</td>
<td>Minimum decimal places</td>
<td>min_decimal</td>
<td>Checks that all values have more or equal amounts of decimal places</td>
</tr>
<tr class="even">
<td>double</td>
<td>Maximum decimal places</td>
<td>max_decimal</td>
<td>Checks that all values have less or equal amounts of decimal places</td>
</tr>
<tr class="odd">
<td>character</td>
<td>Minimum length</td>
<td>min_length</td>
<td>Checks that all strings have length are above or equal to the minimum length</td>
</tr>
<tr class="even">
<td>character</td>
<td>Maximum length</td>
<td>max_length</td>
<td>Checks that all strings have length below or equal to the maximum length</td>
</tr>
<tr class="odd">
<td>character</td>
<td>allowed strings</td>
<td>allowed_strings</td>
<td>Validates that entries match a set of permitted values, list or regex can be used. (Optional and can use forbidden strings instead)</td>
</tr>
<tr class="even">
<td>character</td>
<td>forbidden strings</td>
<td>forbidden_strings</td>
<td>Validates that entries do not contain a set of forbidden values, list or regex can be used. (Optional and can use allowed strings instead)</td>
</tr>
<tr class="odd">
<td>date / datetime</td>
<td>Minimum Date</td>
<td>min_date</td>
<td>Checks that all dates are after the minimum date using the format “YYYY-MM-DD”</td>
</tr>
<tr class="even">
<td>date / datetime</td>
<td>Maximum Date</td>
<td>max_date</td>
<td>Checks that all dates are before the maximum date using the format “YYYY-MM-DD”</td>
</tr>
<tr class="odd">
<td>date/ datetime</td>
<td>Minimum Datetime</td>
<td>min_datetime</td>
<td>Checks that all dates are after the minimum datetime. Accepted formats: Y, YM, YMD, YMDH, YMDHM and YMDHMS</td>
</tr>
<tr class="even">
<td>date/ datetime</td>
<td>Maximum Datetime</td>
<td>max_datetime</td>
<td>Checks that all dates are before the maximum datetime. Accepted formats: Y, YM, YMD, YMDH, YMDHM and YMDHMS</td>
</tr>
<tr class="odd">
<td>any</td>
<td>Missing values check</td>
<td>allow_na</td>
<td>Checks for missing or NA values in the column.</td>
</tr>
<tr class="even">
<td>any</td>
<td>Class</td>
<td>class</td>
<td>Checks that column data Class matches the specified type</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="adding-custom-checks">Adding Custom Checks<a class="anchor" aria-label="anchor" href="#adding-custom-checks"></a>
</h2>
<p>Additionally, you can write your own checks and add them to the validator object using the <code>add_custom_check</code> function. This is particularly useful for checks involving more than one column, which cannot be configured using the standard template. The checks are done in the context of the original data, meaning you can reference columns as if they are variables in the environment (similar to tidy evaluation). This is recommended because it guarantees the checks are done on the correct data only. Alternatively, you can use standard evaluation (see example below).</p>
<p>The example below demonstrates how to incorporate both pre-defined and custom checks into your validation.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>,</span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span>, <span class="fl">40</span>, <span class="fl">50</span>, <span class="fl">60</span>, <span class="fl">70</span>, <span class="fl">80</span>, <span class="fl">90</span>, <span class="fl">100</span><span class="op">)</span>,</span>
<span>  sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">schema</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  check_duplicates <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  check_completeness <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  columns <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"double"</span>, optional <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span>
<span>    age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"double"</span>, optional <span class="op">=</span> <span class="cn">FALSE</span>, min_val <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>,</span>
<span>    sex <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"character"</span>, optional <span class="op">=</span> <span class="cn">FALSE</span>, allowed_strings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"M"</span>, <span class="st">"F"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">data_check_results</span> <span class="op">&lt;-</span> <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="reference/new_validator.html">new_validator</a></span><span class="op">(</span><span class="va">df</span>, <span class="va">schema</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="reference/check.html">check</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="reference/add_check.html">add_check</a></span><span class="op">(</span>description <span class="op">=</span> <span class="st">"There are no males over 90 (tidy evaluation)"</span>, condition <span class="op">=</span> <span class="op">!</span><span class="op">(</span><span class="va">sex</span> <span class="op">==</span> <span class="st">"M"</span> <span class="op">&amp;</span> <span class="va">age</span> <span class="op">&gt;</span> <span class="fl">90</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">data.checker</span><span class="fu">::</span><span class="fu"><a href="reference/add_check.html">add_check</a></span><span class="op">(</span>description <span class="op">=</span> <span class="st">"There are no males over 90 (standard evaluation)"</span>, condition <span class="op">=</span> <span class="op">!</span><span class="op">(</span><span class="va">df</span><span class="op">$</span><span class="va">sex</span> <span class="op">==</span> <span class="st">"M"</span> <span class="op">&amp;</span> <span class="va">df</span><span class="op">$</span><span class="va">age</span> <span class="op">&gt;</span> <span class="fl">90</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">data_check_results</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h1>
<p>We always welcome contributions and suggestions to improve functionality of our products. Feel free to open an issue using the <a href="https://gitlab-app-l-01/ASAP/data.checker/-/issues" class="external-link">issue tab</a>. If you wish to make a direct contribution, please fork the repository, make your changes and raise a pull request and we can review and merge your changes.</p>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing data.checker</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>First Last <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/YOUR-ORCID-ID" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
